"use strict";!function(){var e=document.getElementsByClassName("jlc-wrapper");function d(e,t,a){var r=document.createElement(e);if(t)for(var n in t){var s=t[n];"className"===n&&(n="class");var l=document.createAttribute(n);l.value=s,r.setAttributeNode(l)}return a&&(r.innerHTML=a),r}function u(){var e=f(this,".jlc-wrapper"),t=e.getElementsByClassName("jlc-cover")[0],a=e.getElementsByClassName("jlc-form")[0];v(t,"is_active");a=window.getComputedStyle(a).getPropertyValue("min-width");0!==parseInt(a)&&(e.style.width=e.style.minWidth=a)}function v(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function y(e,t){e.classList.contains(t)&&e.classList.remove(t)}function m(e){var t=f(e.target,".jlc-wrapper"),a=t.getElementsByClassName("jlc-form")[0],r=a.getElementsByClassName("jlc-input")[0],n=t.getAttribute("data-terms")||!1,e=!1;"false"===n&&!1!==n||(e=t.getElementsByClassName("jlc-terms-checkbox")[0].checked),((r=r.value,/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(r).toLowerCase()))&&e?v:y)(a,"jlc-form__valid")}function f(e,t){for(;(e=e.parentElement)&&!(e.matches||e.matchesSelector).call(e,t););return e}function h(e,t,a){t=d("div",{class:"jlc-error "+(2<arguments.length&&void 0!==a?a:"")},t);e.appendChild(t)}function p(e,t){var a="0.5",r="blur(4px)";t&&(a="1",r="none"),e.style.opacity=a,e.style.filter=r}function b(e){var t={hitType:"event",eventCategory:e.category,eventAction:e.action||"",eventLabel:e.label||""};Object.prototype.hasOwnProperty.call(e,"value")&&(t.eventValue=e.value),window.ga&&ga("send",t),t.hitCallback&&(window.ga?setTimeout(e.hitCallback,1500):t.hitCallback())}function j(e,t){b({category:"signup-widget-error",action:e,label:t})}function g(e){e.preventDefault();var a=f(this,".jlc-wrapper"),r=a.getElementsByClassName("jlc-form")[0],n=a.getElementsByClassName("jlc-sbmt")[0],s=a.getElementsByClassName("jlc-input")[0],l=a.getAttribute("data-tx-error")||"An error has occurred, please try again later",i=a.getAttribute("data-tx-exist")||"This email is already registered.<br>Please ",c=a.getAttribute("data-tx-exist-linked")||"sign in to access",o=a.getAttribute("data-tx-success")||"CHECK YOUR EMAIL",d=a.getAttribute("data-key")||"jelastichosting.nl",u=!!a.getAttribute("data-track-ga")||!1;-1<d.indexOf("app.")&&(d=d.replace("app.","")),v(r,"jlc-form__sending");var t=document.getElementsByClassName("jlc-error")[0];void 0!==t&&null!=t&&a.removeChild(t);var m=encodeURIComponent(s.value),e="https://reg."+d+"/signup",p=new XMLHttpRequest,t="email="+m,g={email:m};p.open("POST",e,!0),p.setRequestHeader("Content-type","application/x-www-form-urlencoded"),p.onload=function(){var e,t;200<=p.status&&p.status<400?(i+="<a target='_blank' href='https://app."+d+"'>"+c+"</a>.",0===(t=JSON.parse(p.responseText)).result&&(t.response.exist&&t.response.activated?(h(a,i,"user-exist"),y(r,"jlc-form__sending"),u&&(g.error="user exist",j(d,JSON.stringify(g)))):(y(r,"jlc-form__sending"),v(r,"jlc-form__succeed"),n.disabled=s.disabled=!0,s.value=o,u&&(e=d,t=JSON.stringify(g),b({category:"signup-widget-success",action:e,label:t}))))):(h(a,l),y(r,"jlc-form__sending"),u&&(g.error="We reached our target server, but it returned an error",j(d,JSON.stringify(g))))},p.onerror=function(e){h(a,l),y(r,"jlc-form__sending"),u&&(g.error="There was a connection error of some sort",j(d,JSON.stringify(g)))},p.send(t)}document.querySelector('script[src*="google-analytics.com/analytics.js"]'),Array.from(e).forEach(function(e){p(e,!1);var t,a=e.getAttribute("data-text")||"GET STARTED NOW",r=e.getAttribute("data-terms")||!1,n=e.getAttribute("data-terms-link")||"#",s=e.getAttribute("data-privacy-link")||"#",l=e.getAttribute("data-track-ga")||!1;!document.querySelector('script[src*="google-analytics.com/analytics.js"]')&&l&&(t=window,o=document,i="script",c="ga",t.GoogleAnalyticsObject=c,t.ga=t.ga||function(){(t.ga.q=t.ga.q||[]).push(arguments)},t.ga.l=+new Date,c=o.createElement(i),o=o.getElementsByTagName(i)[0],c.async=1,c.src="//www.google-analytics.com/analytics.js",o.parentNode.insertBefore(c,o),ga("create",l,"auto",{allowLinker:!0}),ga("require","linker"),ga("linker:autoLink",["jelastic.cloud"]),ga("send","pageview"));var i=d("div",{className:"jlc-cover"});e.appendChild(i);var c=d("button",{className:"jlc-btn"},a);i.appendChild(c);var o=d("form",{className:"jlc-form"});i.appendChild(o);l=d("div",{className:"jlc-input-wrapper"});o.appendChild(l);a=d("input",{className:"jlc-input",placeholder:"your@email.com",type:"email",name:"email",required:"true"});l.appendChild(a);i=d("button",{className:"jlc-sbmt"});l.appendChild(i),"false"===r&&!1!==r||(i=d("label",{className:"jlc-terms-label"}),o.appendChild(i),r=d("input",{type:"checkbox",name:"accept_terms",className:"jlc-terms-checkbox",required:"required"}),i.appendChild(r),s=d("span",null,'Read and accept <a target="_blank" href="'+n+'">Terms of Use</a> & <a target="_blank" href="'+s+'">Privacy Policy</a>'),i.appendChild(s),r.addEventListener("change",m,!1)),c.addEventListener("click",u),o.addEventListener?o.addEventListener("submit",g,!1):o.attachEvent&&o.attachEvent("onsubmit",g),a.addEventListener("change",m,!1),a.addEventListener("keyup",m,!1),p(e,!0)})}();